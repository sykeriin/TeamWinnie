
import os
from google import genai

def gemini_brief_from_tokens(tokens: dict) -> str:
    api_key = os.getenv("AIzaSyCOVHyuJ2ARRZ2fYlTXVKXhnlVeqgwuHvg")
    client = genai.Client(api_key=api_key)
    system = "Summarize METAR tokens for pilots. Lead with hazards and operational limits. Preserve numbers/units exactly. Omit fields not present. 1â€“2 sentences."
    prompt = f"{system}\nTokens: {tokens}"
    resp = client.models.generate_content(
        model="gemini-2.5-flash",
        contents=prompt,
        config={"temperature": 0.1, "max_output_tokens": 150},
    )
    return resp.text.strip()
